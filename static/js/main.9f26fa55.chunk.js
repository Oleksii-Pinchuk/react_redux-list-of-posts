(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{25:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var s,c,r,a=n(9),o=n.n(a),i=n(8),u=n(1),d=n(3),l=n(4),m=n(2),b=n.n(m),p=n(5),j="https://mate.academy/students-api",f=function(){var e=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(j,"/").concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(j,"/").concat(t),{method:"DELETE"});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),h=Object(p.b)("post/getPosts",function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",f("/posts?userId=".concat(t)));case 2:return e.abrupt("return",f("/posts/"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(p.b)("post/deletePost",function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O("posts/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=Object(p.c)({name:"post",initialState:{posts:[],selectedPostId:0,isPostsLoading:!0},reducers:{changePostId:function(e,t){e.selectedPostId=t.payload}},extraReducers:(s={},Object(d.a)(s,h.pending.type,(function(e){e.isPostsLoading=!0})),Object(d.a)(s,h.fulfilled.type,(function(e,t){e.isPostsLoading=!1,e.posts=t.payload})),Object(d.a)(s,h.rejected.type,(function(e){e.isPostsLoading=!1})),s)}),y=v.actions.changePostId,g=v.reducer,_=function(){return Object(i.b)()},N=i.c,w=(n(25),n(0)),C=function(){return Object(w.jsx)("div",{className:"Loader",children:Object(w.jsx)("div",{className:"Loader__content"})})},P=(n(27),function(){var e=_(),t=N((function(e){return e.postReducer})),n=t.posts,s=t.selectedPostId,c=t.isPostsLoading,r=N((function(e){return e.userReducer})).selectedUserId;Object(u.useEffect)((function(){e(h(r))}),[r]);var a=function(t){e(y(t))};return Object(w.jsxs)("div",{className:"PostsList",children:[Object(w.jsx)("h2",{children:"Posts:"}),c?Object(w.jsx)(C,{}):Object(w.jsx)("ul",{className:"PostsList__list",children:n.map((function(t){return Object(w.jsxs)("li",{className:"PostsList__item",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("b",{children:"[User #".concat(t.userId,"]:")}),t.title]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return n=t.id,e(x(n)),void e(h(r));var n},children:"Delete"}),t.id===s?Object(w.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return a(0)},children:"Close"}):Object(w.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return a(t.id)},children:"Open"})]})]},t.id)}))})]})}),L=n(7),I=n(11),k=Object(p.b)("comments/getCommentsByPostId",function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f("/comments?postId=".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=Object(p.b)("comments/addComment",function(){var e=Object(l.a)(b.a.mark((function e(t){var n,s,c,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.postId,s=t.name,c=t.email,r=t.body,e.prev=1,e.next=4,fetch("".concat(j,"/comments"),{headers:{"Content-type":"application/json; charset=UTF-8"},method:"POST",body:JSON.stringify({postId:n,name:s,email:c,body:r})});case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),new Error;case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()),S=Object(p.b)("comments/deleteComment",function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O("/comments/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=Object(p.c)({name:"comments",initialState:{comments:[],isCommentsLoading:!1,isCommentsVisible:!0},reducers:{changeCommentsVisibility:function(e,t){e.isCommentsVisible=t.payload}},extraReducers:(c={},Object(d.a)(c,k.pending.type,(function(e){e.isCommentsLoading=!0})),Object(d.a)(c,k.fulfilled.type,(function(e,t){e.isCommentsLoading=!1,e.comments=t.payload})),Object(d.a)(c,k.rejected.type,(function(e){e.isCommentsLoading=!1})),Object(d.a)(c,R.pending.type,(function(e){e.isCommentsLoading=!0})),Object(d.a)(c,R.fulfilled.type,(function(e){e.isCommentsLoading=!1})),Object(d.a)(c,R.rejected.type,(function(e){e.isCommentsLoading=!1})),Object(d.a)(c,S.pending.type,(function(e){e.isCommentsLoading=!0})),Object(d.a)(c,S.fulfilled.type,(function(e){e.isCommentsLoading=!1})),Object(d.a)(c,S.rejected.type,(function(e){e.isCommentsLoading=!1})),c)}),F=U.actions.changeCommentsVisibility,A=U.reducer,D=(n(28),function(){var e=_(),t=N((function(e){return e.postReducer})).selectedPostId,n=Object(u.useState)({postId:t,name:"",email:"",body:""}),s=Object(I.a)(n,2),c=s[0],r=s[1],a=c.name,o=c.email,i=c.body,m=Object(u.useState)(!0),p=Object(I.a)(m,2),j=p[0],f=p[1],O=function(e){r(Object(L.a)(Object(L.a)({},c),{},Object(d.a)({},e.target.name,e.target.value)))},h=function(){var n=Object(l.a)(b.a.mark((function n(s){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.preventDefault(),!(a.trim()&&(u=o,u.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))&&i.trim())){n.next=10;break}return f(!0),n.next=5,e(R(c));case 5:return n.next=7,e(k(t));case 7:r({postId:t,name:"",email:"",body:""}),n.next=11;break;case 10:f(!1);case 11:case"end":return n.stop()}var u}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(w.jsxs)("form",{className:"NewCommentForm",onSubmit:h,children:[Object(w.jsx)("div",{className:"form-field",children:Object(w.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:a,onChange:O})}),Object(w.jsx)("div",{className:"form-field",children:Object(w.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:o,onChange:O})}),Object(w.jsx)("div",{className:"form-field",children:Object(w.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:i,onChange:O})}),Object(w.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"}),!j&&Object(w.jsx)("div",{className:"NewCommentForm__error-message",children:"Filling form not completed!"})]})}),E=(n(29),function(){var e=_(),t=N((function(e){return e.postReducer})).selectedPostId,n=N((function(e){return e.postReducer})).posts,s=N((function(e){return e.commentsReducer})),c=s.comments,r=s.isCommentsVisible,a=n.find((function(e){return e.id===t}));Object(u.useEffect)((function(){t&&e(k(t))}),[t]);var o=function(){var t=Object(l.a)(b.a.mark((function t(n,s){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(S(n));case 2:return t.next=4,e(k(s));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return a?Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"PostDetails",children:[Object(w.jsx)("h2",{children:"Post details:"}),Object(w.jsx)("section",{className:"PostDetails__post",children:Object(w.jsx)("p",{children:null===a||void 0===a?void 0:a.body})}),Object(w.jsx)("section",{className:"PostDetails__comments",children:0!==c.length&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("button",{type:"button",className:"button",onClick:function(){e(F(!r))},children:"".concat(r?"Hide":"Show"," ").concat(c.length," comments")}),r&&Object(w.jsx)("ul",{className:"PostDetails__list",children:c.map((function(e){return Object(w.jsxs)("li",{className:"PostDetails__list-item",children:[Object(w.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return o(e.id,e.postId)},children:"X"}),Object(w.jsx)("p",{children:e.body})]},e.id)}))})]})}),Object(w.jsx)("section",{children:Object(w.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(w.jsx)(D,{})})})]})}):Object(w.jsx)("h2",{children:"Post not selected."})}),V=Object(p.b)("user/getUsers",Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f("/users"));case 1:case"end":return e.stop()}}),e)})))),T=Object(p.c)({name:"user",initialState:{users:[],selectedUserId:0,isUsersLoading:!1},reducers:{changeUserId:function(e,t){e.selectedUserId=t.payload}},extraReducers:(r={},Object(d.a)(r,V.pending.type,(function(e){e.isUsersLoading=!0})),Object(d.a)(r,V.fulfilled.type,(function(e,t){e.isUsersLoading=!1,e.users=t.payload})),Object(d.a)(r,V.rejected.type,(function(e){e.isUsersLoading=!1})),r)}),J=T.actions.changeUserId,z=T.reducer,B=function(){var e=_(),t=N((function(e){return e.userReducer})).users;Object(u.useEffect)((function(){e(V())}),[]);return Object(w.jsxs)("label",{htmlFor:"userSelect",className:"UserSelect__label",children:["Select a user: \xa0",Object(w.jsxs)("select",{id:"userSelect",className:"App__user-selector",onChange:function(t){e(J(+t.target.value)),e(y(0))},children:[Object(w.jsx)("option",{value:0,children:"All users"}),t.map((function(e){return Object(w.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})},Y=(n(30),n(31),function(){return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)("header",{className:"App__header",children:Object(w.jsx)(B,{})}),Object(w.jsxs)("main",{className:"App__main",children:[Object(w.jsx)("div",{className:"App__sidebar",children:Object(w.jsx)(P,{})}),Object(w.jsx)("div",{className:"App__content",children:Object(w.jsx)(E,{})})]})]})}),Z=n(6),H=Object(Z.b)({userReducer:z,postReducer:g,commentsReducer:A}),X=Object(p.a)({reducer:H}),$=function(){return Object(w.jsx)(i.a,{store:X,children:Object(w.jsx)(Y,{})})};o.a.render(Object(w.jsx)($,{}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.9f26fa55.chunk.js.map